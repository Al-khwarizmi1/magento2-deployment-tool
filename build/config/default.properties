# -------------------------------------------------------------------------------
# Server Directories
# -------------------------------------------------------------------------------
live.symlink=public_html
releases.dir=releases
static.dir=static
backup.dir=backups

#------------------------------------------------------------------------------------------
# Magento
#------------------------------------------------------------------------------------------
# Mageto installation dir (relative path from project root)
magento.dir=magento

bin.n98-magerun2=n98-magerun2
command.permissions=find var vendor pub/static pub/media app/etc -type f -exec chmod g+w {} \; && find var vendor pub/static pub/media app/etc -type d -exec chmod g+w {} \; && chmod u+x bin/magento

# -------------------------------------------------------------------------------
# Deployment Commands
# -------------------------------------------------------------------------------
command.get.project.version=git clone --depth 1 --branch ${release.version} ${git.repo.url} ${release.target}
command.get.project.snapshot=git clone --depth 1 --branch develop ${git.repo.url} ${release.target}
command.build.project.version=composer install --no-dev
command.build.project.snapshot=composer install

# -------------------------------------------------------------------------------
# Symlinks
# -------------------------------------------------------------------------------
static.excludes=app app/etc pub var
static.includes=* app/* app/etc/* pub/* var/*

# -------------------------------------------------------------------------------
# Maintenance Page
# -------------------------------------------------------------------------------
maintenance.page=deployment-settings/templates/maintenance
maintenance.set.command=unlink ${live.symlink} && ln -sf ${maintenance.page} ${live.symlink}

# -------------------------------------------------------------------------------
# Custom Scripts
# -------------------------------------------------------------------------------
post-release-scripts.path=${deployment.settings.dir}/scripts/post-release-scripts.sh

# -------------------------------------------------------------------------------
# Release History
# -------------------------------------------------------------------------------
# (0 = keeps all releases)
releases.keep=3

# (0 = keeps all backups)
backup.keep=3

# -------------------------------------------------------------------------------
# OpCache
# -------------------------------------------------------------------------------
opcache.enabled=1
bin.cachetool=cachetool
param.opcache.fcgi=/var/run/`whoami`.sock
param.opcache.tmp.dir=/home/`whoami`/tmp/
command.opcache.restart=${bin.cachetool} opcache:reset --fcgi=${param.opcache.fcgi} --tmp-dir=${param.opcache.tmp.dir}

# -------------------------------------------------------------------------------
# Varnish
# -------------------------------------------------------------------------------
varnish.enabled=0
command.varnish.restart=sudo /etc/init.d/varnish restart


